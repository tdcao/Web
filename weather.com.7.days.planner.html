<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Forecast Carousel</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: black;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    overflow: hidden;
    touch-action: none;
    color: white;
    font-family: sans-serif;
  }
  .caption {
    position: absolute;
    top: 20px;
    text-align: center;
    width: 100%;
    font-size: 20px;
    font-weight: bold;
  }
  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    transition: transform 0.3s ease;
    transform-origin: center center;
  }
  .controls {
    position: absolute;
    bottom: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
    opacity: 1;
    transition: opacity 0.3s;
  }
  button {
    background: rgba(0,0,0,0.5);
    color: white;
    border: none;
    font-size: 18px;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
</head>
<body>
  <!-- div class="caption" id="caption">Day 1 Forecast</div -->
  <img id="carousel" src="https://s.w-x.co/staticmaps/DCT_SPECIAL93_1280x720.jpg">
  <!-- div class="controls" id="controls">
    <button id="prevBtn" onclick="prevImage()" disabled>⬅️</button>
    <button id="nextBtn" onclick="nextImage()">➡️</button>
  </div -->

<script>
  const images = [
    { url: "https://s.w-x.co/staticmaps/DCT_SPECIAL93_1280x720.jpg", caption: "Day 1 Forecast" },
    { url: "https://s.w-x.co/staticmaps/DCT_SPECIAL94_1280x720.jpg", caption: "Day 2 Forecast" },
    { url: "https://s.w-x.co/staticmaps/DCT_SPECIAL95_1280x720.jpg", caption: "Day 3 Forecast" },
    { url: "https://s.w-x.co/staticmaps/DCT_SPECIAL96_1280x720.jpg", caption: "Day 4 Forecast" },
    { url: "https://s.w-x.co/staticmaps/DCT_SPECIAL97_1280x720.jpg", caption: "Day 5 Forecast" },
    { url: "https://s.w-x.co/staticmaps/DCT_SPECIAL98_1280x720.jpg", caption: "Day 6 Forecast" },
    { url: "https://s.w-x.co/staticmaps/DCT_SPECIAL92_1280x720.jpg", caption: "Day 7 Forecast" }
  ];

  let index = 0;
  const imgElement = document.getElementById('carousel');
  const captionElement = document.getElementById('caption');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const controls = document.getElementById('controls');
  let controlsVisible = true;
  let scale = 1;

  function showImage(i) {
    index = Math.min(Math.max(i, 0), images.length - 1);
    imgElement.src = images[index].url;
    captionElement.textContent = images[index].caption;
    scale = 1;
    imgElement.style.transform = "scale(1)";
    prevBtn.disabled = index === 0;
    nextBtn.disabled = index === images.length - 1;
  }

  function prevImage() { showImage(index - 1); }
  function nextImage() { showImage(index + 1); }

  // Toggle controls on tap/click
  document.body.addEventListener("click", e => {
    // Don't toggle if clicking on a button
    if (e.target.tagName === "BUTTON") return;
    controlsVisible = !controlsVisible;
    controls.style.opacity = controlsVisible ? 1 : 0;
  });

  // Swipe navigation
  let startX = 0;
  document.addEventListener('touchstart', e => startX = e.touches[0].clientX);
  document.addEventListener('touchend', e => {
    let endX = e.changedTouches[0].clientX;
    if (endX - startX > 50) prevImage();
    else if (startX - endX > 50) nextImage();
  });

  // Pinch-to-zoom
  let initialDistance = null;
  document.addEventListener("touchmove", e => {
    if (e.touches.length === 2) {
      let dx = e.touches[0].clientX - e.touches[1].clientX;
      let dy = e.touches[0].clientY - e.touches[1].clientY;
      let distance = Math.sqrt(dx*dx + dy*dy);
      if (initialDistance === null) initialDistance = distance;
      let factor = distance / initialDistance;
      scale = Math.min(Math.max(1, factor), 4); // limit zoom 1x-4x
      imgElement.style.transform = "scale(" + scale + ")";
    }
  });
  document.addEventListener("touchend", e => {
    if (e.touches.length < 2) initialDistance = null;
  });
</script>
</body>

</html>
